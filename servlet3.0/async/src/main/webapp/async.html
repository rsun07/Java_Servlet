1. thread_unblock

hit "/async/thread/unblock"

Console:
"
Main Thread start!
Main Thread completed!
Background Thread start!
i = 0
i = 1
i = 2
Background Thread completed!
"


Response:
"
Main Thread start!
Main Thread completed!
"

2. thread wait

Hit "/async/thread/wait"

Console:
"
Main Thread start!
Background Thread start!
i = 0
i = 1
i = 2
Background Thread completed!
Main Thread completed!
"


Browser wait, block while calculating
Response:
"
Main Thread start!
Background Thread start!
sum = 3
Background Thread completed!
Main Thread completed!
"

3. async context complete

Attention for the "Main Thread completed!" position comparing to (2. thread wait)

Console:
"
Main Thread start!
Main Thread completed!
Background Thread start!
i = 0
i = 1
i = 2
Background Thread completed!
servlet request destroy
after async context complete, won't show up in response
"


Response:
"
Main Thread start!
Main Thread completed!
Background Thread start!
sum = 3
Background Thread completed!
"


4. async context timeout

Hit "/async/context/timeout"

Console:
"
Main Thread start!
Main Thread completed!
Background Thread start!
i = 0
i = 1
i = 2
Background Thread completed!
servlet request destroy
"

Response:
"
Main Thread start!
Main Thread completed!
Background Thread start!
"

Refresh the page:

Console:

"
Main Thread start!
Main Thread completed!
Background Thread start!
i = 0
i = 1
i = 2
servlet request destroy
Background Thread completed!
"


It has the result from the previous response that write into the response output Stream
but haven't show up before last main thread completed

Response:
"
sum = 3
Background Thread completed!
Main Thread start!
Main Thread completed!
Background Thread start!
"


5. async context dispatch

Similar to async context complete

Console:
"
Main Thread start!
Main Thread completed!
Background Thread start!
i = 0
i = 1
i = 2
Background Thread completed!
servlet request destroy
after async context complete, won't show up in response
"

Response:

"
Main Thread start! Main Thread completed! Background Thread start! sum = 3 Background Thread completed! Dispatch page
"

